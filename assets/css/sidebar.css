/* =========================
   Sidebar Styles Modernisés
   ========================= */
:root {
  --primary-blue: #3D74B9;
  --light-blue: rgba(37, 99, 235, 0.08);
  --sidebar-bg: #f4f4f4;
  --menu-hover: rgba(37, 99, 235, 0.04);
  --sidebar-width: 210px;
  --sidebar-gradient: linear-gradient(135deg,#ffffff 0%,#f5f9ff 65%,#eef5fb 100%);
  --sidebar-border: 1px solid rgba(0,0,0,0.05);
  --accent-glow: 0 0 0 3px rgba(61,116,185,0.18);
}

.sidebar-wrapper {
  background: var(--sidebar-gradient);
  width: var(--sidebar-width);
  border-right: var(--sidebar-border);
  min-height: 100vh;
}

.sidebar-inner { position: relative; height: 100%; }

/* Branding */
.sidebar-brand-block {
  display: flex; flex-direction: column; gap: .35rem;
  padding: .9rem .9rem 1rem .9rem; margin: .25rem .25rem .85rem;
  background: linear-gradient(145deg,#ffffff,#f6f9fd 60%);
  border: 1px solid rgba(61,116,185,0.15); border-radius: 14px; position: relative;
  box-shadow: 0 4px 16px -4px rgba(61,116,185,0.15);
}
.sidebar-brand-block:after { content:''; position:absolute; inset:0; border-radius:14px; pointer-events:none; box-shadow: inset 0 0 0 1px rgba(255,255,255,.6); }
.sidebar-brand-logo { height:42px; width:auto; filter: drop-shadow(0 2px 4px rgba(0,0,0,0.12)); }
.sidebar-brand-title { font-size:.8rem; font-weight:700; letter-spacing:.5px; color: var(--primary-blue); margin:0; }
.sidebar-brand-tagline { font-size:.6rem; letter-spacing:.5px; text-transform:uppercase; color:#5d738e; margin:0; font-weight:600; }

/* Menu principal */
.nav-menu { list-style:none; margin:0; padding:0; }
.nav-link {
  color: var(--primary-blue); padding: 0.55rem 0.75rem; border-radius: 8px; transition: all 0.18s ease; position: relative;
  font-size: 0.82rem; font-weight: 600; letter-spacing: .3px; display: flex; align-items: center; gap: .55rem;
  background: #ffffff; border: 1px solid rgba(61,116,185,0.08);
}
.nav-link i { font-size:1.05rem; opacity:.9; }
.nav-link:hover { color: var(--primary-blue); background:#f4f9ff; transform: translateX(2px); box-shadow: var(--accent-glow); border-color: rgba(61,116,185,0.25); text-decoration:none; }
.nav-link.active { background: var(--primary-blue)!important; color:#fff; box-shadow:0 4px 12px rgba(61,116,185,0.25); border-color: var(--primary-blue); }
.nav-link.active::before { content:''; position:absolute; left:0; top:50%; height:60%; width:3px; background:white; border-radius:0 2px 2px 0; transform:translateY(-50%); }

/* Sous-menu */
.sidebar-sub { padding-left: 2.2rem; margin: .25rem 0 .75rem; }
.sidebar-sub a { color:#64748b; padding:0.42rem 0.65rem; border-radius:6px; font-size:0.7rem; transition:all .18s ease; display:flex; align-items:center; gap:.45rem; text-decoration:none; }
.sidebar-sub a:hover { color: var(--primary-blue); background:#f0f6fd; box-shadow:inset 0 0 0 1px rgba(61,116,185,0.15); }

.badge-counter { font-size: 0.6rem; padding: 0.2rem 0.55rem; border-radius: 16px; background: linear-gradient(135deg,#e6eef7,#ffffff); color: var(--primary-blue); font-weight:600; border:1px solid rgba(61,116,185,0.18); }

.menu-divider { height:1px; background:linear-gradient(90deg, rgba(61,116,185,0.25), rgba(0,0,0,0.05) 45%, rgba(61,116,185,0.25)); margin:1.1rem 0 .9rem; opacity:.9; }

/* Groupes collapsibles */
.menu-group-header { display:flex; align-items:center; justify-content:space-between; font-size:.55rem; font-weight:700; color:#5b6d80; text-transform:uppercase; letter-spacing:1px; margin:.5rem .3rem .3rem; padding:.35rem .55rem; border-radius:6px; background:#eef4fa; }
.collapse-toggle-btn { background:transparent; border:none; color:#3D74B9; font-size:.7rem; display:inline-flex; align-items:center; gap:.25rem; cursor:pointer; padding:.2rem .45rem; border-radius:6px; transition:.18s ease; }
.collapse-toggle-btn:hover { background:#dbe9f6; }
.collapse-toggle-btn i { transition:.3s ease; }
.collapse-toggle-btn[aria-expanded="true"] i { transform:rotate(180deg); }
.collapsing-height { transition:height .25s ease; overflow:hidden; }

/* Anciennes classes utilisées ailleurs (compat) */
.competences-link { color: var(--primary-blue); font-size: 0.75rem; padding: 0.35rem 0.75rem; border-radius: 6px; background: var(--light-blue); transition:.2s; display:inline-flex; align-items:center; gap:.5rem; text-decoration:none; }
.competences-link:hover { background: rgba(37,99,235,0.12); transform:translateY(-1px); }

@media (max-width: 767.98px) { .offcanvas { max-width: var(--sidebar-width); } }

/* Mode sombre (préparation) */
@media (prefers-color-scheme: dark) {
  .sidebar-wrapper { background: linear-gradient(135deg,#1e252c,#293541); border-right:1px solid rgba(255,255,255,0.05); }
  .sidebar-brand-block { background: linear-gradient(145deg,#24303b,#1d252d); border-color:rgba(255,255,255,0.08); }
  .sidebar-brand-title { color:#e2ecf7; }
  .sidebar-brand-tagline { color:#90a6bd; }
  .nav-link { background:#24303b; color:#d7e5f4; border-color:rgba(255,255,255,0.05); }
  .nav-link:hover { background:#2f4150; color:#fff; }
  .nav-link.active { background:#3D74B9; }
  .sidebar-sub a:hover { background:#2a3a48; }
  .badge-counter { background:#2a3a48; color:#c9d7e5; border-color:#3D74B9; }
  .menu-group-header { background:#2a3a48; color:#8ea3b9; }
}

/* Dark mode explicite via classe .theme-dark */
.theme-dark .sidebar-wrapper { background: linear-gradient(135deg,#1e252c,#293541); border-right:1px solid rgba(255,255,255,0.05); }
.theme-dark .sidebar-brand-block { background: linear-gradient(145deg,#24303b,#1d252d); border-color:rgba(255,255,255,0.08); }
.theme-dark .sidebar-brand-title { color:#e2ecf7; }
.theme-dark .sidebar-brand-tagline { color:#90a6bd; }
.theme-dark .nav-link { background:#24303b; color:#d7e5f4; border-color:rgba(255,255,255,0.05); }
.theme-dark .nav-link:hover { background:#2f4150; color:#fff; }
.theme-dark .nav-link.active { background:#3D74B9; color:#fff; }
.theme-dark .sidebar-sub a { color:#9bb1c6; }
.theme-dark .sidebar-sub a:hover { background:#2a3a48; color:#fff; }
.theme-dark .badge-counter { background:#2a3a48; color:#c9d7e5; border-color:#3D74B9; }
.theme-dark .menu-group-header { background:#2a3a48; color:#8ea3b9; }

/* Mode compact: largeur réduite et textes masqués */
.sidebar-compact .sidebar-wrapper { width:70px; }
.sidebar-compact .sidebar-brand-block { align-items:center; text-align:center; }
.sidebar-compact .sidebar-brand-title, .sidebar-compact .sidebar-brand-tagline { display:none; }
.sidebar-compact .nav-link { justify-content:center; }
.sidebar-compact .nav-link span, .sidebar-compact .nav-link .menu-group-header, .sidebar-compact .sidebar-sub { display:none !important; }
.sidebar-compact .badge-counter { display:none; }

/* Nettoyage des anciennes redéfinitions redondantes supprimées pour éviter les conflits */

.offcanvas {
  z-index: 1080 !important;
}
.offcanvas-backdrop {
  z-index: 1079 !important;
}
